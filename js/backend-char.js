var dataStr1 = '{"location":{"nibq":[{"nid":1234567801,"angle":"45","deviceId":"nbq_1","left":"258.75","top":"384","name":"1"},{"nid":1234567802,"angle":"23","deviceId":"nbq_4","left":"228.75","top":"305","name":"2"}],"qixy":[{"nid":1234567801,"angle":"75","deviceId":"qxy_9","left":"195","top":"206","name":"1"},{"nid":1234567802,"angle":"223","deviceId":"qxy_10","left":"513","top":"259","name":"2"}],"dianb":[{"nid":1234567801,"angle":"145","deviceId":"db_11","left":"509","top":"198","name":"1"},{"nid":1234567802,"angle":"87","deviceId":"db_12","left":"305","top":"316","name":"2"}],"roofId":"1","siteId":"1","zj":[{"angle":"34","col":"3","deviceId":"tbid_2_3_3_item_zj","direction":"1","left":"459.75","list":[{"zid":1234567803,"deviceId":"tbid_2_3_3_item_zj_0_0","i":0,"j":0},{"zid":1234567804,"deviceId":"tbid_2_3_3_item_zj_0_1","i":0,"j":1},{"zid":1234567805,"deviceId":"tbid_2_3_3_item_zj_0_2","i":0,"j":2},{"zid":1234567806,"deviceId":"tbid_2_3_3_item_zj_1_0","i":1,"j":0},{"zid":1234567807,"deviceId":"tbid_2_3_3_item_zj_1_1","i":1,"j":1},{"zid":1234567808,"deviceId":"tbid_2_3_3_item_zj_1_2","i":1,"j":2},{"zid":1234567809,"deviceId":"tbid_2_3_3_item_zj_2_0","i":2,"j":0},{"zid":12345678010,"deviceId":"tbid_2_3_3_item_zj_2_1","i":2,"j":1},{"zid":1234567811,"deviceId":"tbid_2_3_3_item_zj_2_2","i":2,"j":2}],"row":"3","top":"297"},{"angle":"99","col":"3","deviceId":"tbid_3_3_3_item_zj2","direction":"2","left":"336.75","list":[{"zid":1234567812,"deviceId":"tbid_3_3_3_item_zj2_0_0","i":0,"j":0},{"zid":1234567813,"deviceId":"tbid_3_3_3_item_zj2_0_1","i":0,"j":1},{"zid":1234567814,"deviceId":"tbid_3_3_3_item_zj2_0_2","i":0,"j":2},{"zid":1234567815,"deviceId":"tbid_3_3_3_item_zj2_1_0","i":1,"j":0},{"zid":1234567816,"deviceId":"tbid_3_3_3_item_zj2_1_1","i":1,"j":1},{"zid":1234567817,"deviceId":"tbid_3_3_3_item_zj2_1_2","i":1,"j":2},{"zid":1234567818,"deviceId":"tbid_3_3_3_item_zj2_2_0","i":2,"j":0},{"zid":1234567819,"deviceId":"tbid_3_3_3_item_zj2_2_1","i":2,"j":1},{"zid":1234567820,"deviceId":"tbid_3_3_3_item_zj2_2_2","i":2,"j":2}],"row":"3","top":"276"},{"angle":"0","col":"3","deviceId":"tbid_5_3_3_item_zj2","direction":"2","left":"356.75","list":[{"zid":1234567821,"deviceId":"tbid_5_3_3_item_zj2_0_0","i":0,"j":0},{"zid":1234567822,"deviceId":"tbid_5_3_3_item_zj2_0_1","i":0,"j":1},{"zid":1234567823,"deviceId":"tbid_5_3_3_item_zj2_0_2","i":0,"j":2},{"zid":1234567824,"deviceId":"tbid_5_3_3_item_zj2_1_0","i":1,"j":0},{"zid":1234567825,"deviceId":"tbid_5_3_3_item_zj2_1_1","i":1,"j":1},{"zid":1234567826,"deviceId":"tbid_5_3_3_item_zj2_1_2","i":1,"j":2},{"zid":1234567827,"deviceId":"tbid_5_3_3_item_zj2_2_0","i":2,"j":0},{"zid":1234567828,"deviceId":"tbid_5_3_3_item_zj2_2_1","i":2,"j":1},{"zid":1234567829,"deviceId":"tbid_5_3_3_item_zj2_2_2","i":2,"j":2}],"row":"3","top":"437"}]},       "chuan":[{"clist":[{"deviceId":1508570463097,"zlist":[{"deviceId":"tbid_3_3_3_item_zj2_2_2","zid":1234567820,"cname":"1.3.1"},{"deviceId":"tbid_3_3_3_item_zj2_1_1","zid":1234567816,"cname":"1.3.2"},{"deviceId":"tbid_3_3_3_item_zj2_1_2","zid":1234567817,"cname":"1.3.3"},{"deviceId":"tbid_3_3_3_item_zj2_0_2","zid":1234567814,"cname":"1.3.4"},{"deviceId":"tbid_3_3_3_item_zj2_0_1","zid":1234567813,"cname":"1.3.5"},{"deviceId":"tbid_3_3_3_item_zj2_0_0","zid":1234567812,"cname":"1.3.6"},{"deviceId":"tbid_2_3_3_item_zj_1_2","zid":1234567808,"cname":"1.3.7"},{"deviceId":"tbid_2_3_3_item_zj_2_2","zid":1234567811,"cname":"1.3.8"},{"deviceId":"tbid_5_3_3_item_zj2_0_2","zid":1234567823,"cname":"1.3.9"}],"name":"3"}],"nid":1234567801,"deviceId":"nbq_1","name":"1"},{"clist":[{"deviceId":1508570452314,"zlist":[{"deviceId":"tbid_3_3_3_item_zj2_1_0","zid":1234567815,"cname":"2.3.1"},{"deviceId":"tbid_3_3_3_item_zj2_2_0","zid":1234567818,"cname":"2.3.2"},{"deviceId":"tbid_3_3_3_item_zj2_2_1","zid":1234567819,"cname":"2.3.3"},{"deviceId":"tbid_2_3_3_item_zj_2_0","zid":1234567809,"cname":"2.3.4"},{"deviceId":"tbid_2_3_3_item_zj_1_1","zid":1234567807,"cname":"2.3.5"},{"deviceId":"tbid_2_3_3_item_zj_2_1","zid":12345678010,"cname":"2.3.6"},{"deviceId":"tbid_5_3_3_item_zj2_1_1","zid":1234567825,"cname":"2.3.7"},{"deviceId":"tbid_5_3_3_item_zj2_1_2","zid":1234567826,"cname":"2.3.8"},{"deviceId":"tbid_5_3_3_item_zj2_2_0","zid":1234567827,"cname":"2.3.9"}],"name":"3"},{"deviceId":1508570476881,"zlist":[{"deviceId":"tbid_2_3_3_item_zj_1_0","zid":1234567806,"cname":"2.2.1"},{"deviceId":"tbid_2_3_3_item_zj_0_0","zid":1234567803,"cname":"2.2.2"},{"deviceId":"tbid_2_3_3_item_zj_0_1","zid":1234567804,"cname":"2.2.3"},{"deviceId":"tbid_2_3_3_item_zj_0_2","zid":1234567805,"cname":"2.2.4"},{"deviceId":"tbid_5_3_3_item_zj2_0_0","zid":1234567821,"cname":"2.2.5"},{"deviceId":"tbid_5_3_3_item_zj2_0_1","zid":1234567822,"cname":"2.2.6"},{"deviceId":"tbid_5_3_3_item_zj2_1_0","zid":1234567824,"cname":"2.2.7"},{"deviceId":"tbid_5_3_3_item_zj2_2_1","zid":1234567828,"cname":"2.2.8"},{"deviceId":"tbid_5_3_3_item_zj2_2_2","zid":1234567829,"cname":"2.2.9"}],"name":"2"}],"nid":1234567802,"deviceId":"nbq_4","name":"2"}]}';
var dataStr2 = '{"nibq":[{"deviceId":"nbq_1","data":"128.0W"},{"deviceId":"nbq_4","data":"109.0W"}],"qixy":[{"deviceId":"qxy_9","data":"20W/m"},{"deviceId":"qxy_10","data":"30W/m"}],"dianb":[{"deviceId":"db_11","data":"0.5W"},{"deviceId":"db_12","data":"3.1W"}],"zj":[{"deviceId":"tbid_2_3_3_item_zj_0_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_2_3_3_item_zj_0_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_2_3_3_item_zj_0_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_2_3_3_item_zj_1_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_2_3_3_item_zj_1_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_2_3_3_item_zj_1_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_2_3_3_item_zj_2_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_2_3_3_item_zj_2_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_2_3_3_item_zj_2_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_0_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_0_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_0_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_1_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_1_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_1_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_2_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_2_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_3_3_3_item_zj2_2_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_0_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_0_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_0_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_1_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_1_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_1_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_2_0","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_2_1","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"},{"deviceId":"tbid_5_3_3_item_zj2_2_2","xlh":"2478923759908490213","gl":"6W","dy":"26.3V","dl":"0.2A","wd":"27.4","ljfd":"136.8KWh"}]}';
var dataStr3 = '{"wd":[{"id":348923758931,"name":"des","devId":"wd_1","left":"785.5","top":"247.6666717529297"},{"id":348923758932,"name":"fesgse","devId":"wd_2","left":"707.5","top":"346.66668701171875"},{"id":348923758933,"name":"esgesad","devId":"wd_3","left":"1029.5","top":"411.66668701171875"}]}';
/**
 * 组件用到的变量
 * */
var nbqArr, zjChooseArr, zjInfoArr;
//点击逆变器的id
var idNChoose = "",
	ct, isChooseId = false,
	idRight = "";

window.onload = function() {
		getWD();
	}
	//改变屋顶
function changeSelect() {
	clearAll();
	var ss = byId("monitor_wd_select").value;
	if(ss == 1) {
		getWD();
	} else {
		getZJ();
	}
}
/**
 * 屋顶
 * */
function getWD() {
	//获得鼠标位置 显示屋顶信息的div
	$(document).mousemove(function(e) {
		var xx = e.originalEvent.x || e.originalEvent.layerX || 0;
		var yy = e.originalEvent.y || e.originalEvent.layerY || 0;
		$('#monitor_wd_show').css({
			'left': xx + 'px',
			'top': yy + 'px'
		});
	});
	//解析数据
	var arrData = eval("(" + dataStr3 + ")");
	for(var i = 0; i < arrData['wd'].length; i++) {
		var tid = arrData['wd'][i]['devId'];
		var str = '<div class="wd_item" id="' + tid + '" onmouseover="showInfoWD(\'' + tid + '\',\'' + arrData['wd'][i]['id'] + '\',\'' + arrData['wd'][i]['name'] + '\')" onmouseout="clearCT()" ><img class="wd_icon" src="img/scho_wd.jpg" /></div>';
		byId("monitor_data2").innerHTML += str;
		//通过jquery设置仪器的位置  如果有好的js优化可以替换
		var jqtid = "#" + tid;
		$(jqtid).offset({
			top: arrData['wd'][i]['top'],
			left: arrData['wd'][i]['left']
		});
	}
}
//设置定时器 鼠标放在上面2秒执行显示div代码
function showInfoWD(wdid, wdrid, wdname) {
	ct = window.setInterval(showInfoWDView(wdid, wdrid, wdname), 2000);
}
//设置显示屋顶div及设置屋顶信息
function showInfoWDView(wdid, wdrid, wdname) {
	byId("monitor_show_info_wd_id").innerText = wdrid;
	byId("monitor_show_info_wd_name").innerText = wdname;
	byId("monitor_wd_show").style.display = "block";
}

/**
 * 组件
 * */

function getZJ() {
	//获取并解析第一次ajax数据
	//设置组件模块及仪器位置
	viewSet();
	//设置串及组件间的逻辑关系
	dataSet();
	//获得鼠标位置 显示组件信息的div
	$(document).mousemove(function(e) {
		var xx = e.originalEvent.x || e.originalEvent.layerX || 0;
		var yy = e.originalEvent.y || e.originalEvent.layerY || 0;
		$('#monitor_show').css({
			'left': xx + 'px',
			'top': yy + 'px'
		});
	});
}
/**
 *设置步骤 
 * */
//第一步
function viewSet() {
	nbqArr = new Array();
	zjChooseArr = new Array();
	//解析ajax数据
	var monitorFirst = eval("(" + dataStr1 + ")");
	//设置组件模块及仪器的位置
	addView(monitorFirst['location']);
	//存储设置逆变器的数组
	nbqArr = monitorFirst['chuan'];
}
//第二步
function dataSet() {
	var monitorSecond = eval("(" + dataStr2 + ")");
	yqDataSet(monitorSecond['nibq']);
	yqDataSet(monitorSecond['dianb']);
	yqDataSet(monitorSecond['qixy']);
	zjInfoArr = monitorSecond['zj'];
}

/**
 * 设置数据
 * */
function yqDataSet(arrData) {
	for(var i = 0; i < arrData.length; i++) {
		byId(arrData[i]['deviceId']).innerText = arrData[i]['data'];
	}
}

function showInfo(zjid) {
	ct = window.setInterval(showInfoView(zjid), 2000);
}

function showInfoView(zjid) {
	var arr = new Array();
	for(var i = 0; i < zjInfoArr.length; i++) {
		if(zjInfoArr[i]['deviceId'] == zjid) {
			arr = zjInfoArr[i];
		}
	}
	byId("monitor_show_info_id").innerText = arr['deviceId'];
	byId("monitor_show_info_xlh").innerText = arr['xlh'];
	byId("monitor_show_info_gl").innerText = arr['gl'];
	byId("monitor_show_info_dl").innerText = arr['dl'];
	byId("monitor_show_info_dy").innerText = arr['dy'];
	byId("monitor_show_info_wd").innerText = arr['wd'];
	byId("monitor_show_info_ljfd").innerText = arr['ljfd'];
	byId("monitor_show").style.display = "block";
}
//清楚定时器及隐藏信息显示的div
function clearCT() {
	byId("monitor_wd_show").style.display = "none";
	byId("monitor_show").style.display = "none";
	window.clearInterval(ct);
}
/**
 * 下面代码为组件串逻辑位置设置代码
 * */
//点击逆变器 更改样式  设置右侧list数据
function normalClickNbq(tid) {
	isChooseId = true;
	var nbqNum = 0;
	//
	for(var i = 0; i < nbqArr.length; i++) {
		if(nbqArr[i]['deviceId'] == tid) {
			nbqNum = i;
		}
	}
	if(idNChoose.length != 0) {
		byId(idNChoose).style.border = "0";
	}
	idNChoose = tid;
	byId(idNChoose).style.border = "1px solid red"
	chooseRightList(nbqNum);
}
//更改右侧list数据
function chooseRightList(nbqNum) {
	//判断逆变器是否点击，没有点击这显示为空
	var str = "";
	if(idRight.length > 0) {
		byId(idRight).style.background = "#fff";
	}
	idRight = "";
	var clist = nbqArr[nbqNum]['clist'];
	for(var i = 0; i < clist.length; i++) {
		str += '<tr class="monitor_right_li" id="' + nbqArr[nbqNum]['clist'][i]['deviceId'] + '"><td class="monitor_right_td" onclick="normalClickZJ(' + nbqNum + ',' + i + ',\'' + nbqArr[nbqNum]['clist'][i]['deviceId'] + '\')">' + clist[i]['name'] + '</td></tr></li>';
	}
	byId('monitor_right_ul').innerHTML = str;
}
//点击串显示串内组件变色
function normalClickZJ(clistNum, zlistNum, rid) {
	//把之前点击的串变色，同时更改当前
	if(idRight.length > 0) {
		byId(idRight).style.background = "#fff";
	}
	idRight = rid + "";
	byId(idRight).style.background = "#00FFFF";
	//清除上次点击串的串内组件变色
	if(zjChooseArr.length > 0) {
		for(var i = 0; i < zjChooseArr.length; i++) {
			byId(zjChooseArr[i]['deviceId']).style.background = "#aca";
			byId(zjChooseArr[i]['deviceId']).innerText = "";
		}
	}
	//	使当前点击的组件列表变色
	zjChooseArr = nbqArr[clistNum]["clist"][zlistNum]["zlist"];
	for(var i = 0; i < zjChooseArr.length; i++) {
		byId(zjChooseArr[i]['deviceId']).style.background = "red";
		byId(zjChooseArr[i]['deviceId']).innerText = zjChooseArr[i]['cname'];
	}
}
/**
 * 下面代码为添加代码
 * */
//添加仪器
function addView(arrData) {
	addYq(arrData['nibq'], 'nibq');
	addYq(arrData['dianb'], 'dianb');
	addYq(arrData['qixy'], 'qixy');
	addZj(arrData['zj']);
}
//添加仪器
function addYq(arrData, cls) {
	for(var i = 0; i < arrData.length; i++) {
		var tid = arrData[i]['deviceId'];
		if(cls == 'nibq') {
			byId("monitor_data2").innerHTML += '<div class="' + cls + '" id="' + tid + '" onclick="normalClickNbq(\'' + tid + '\')"></div>';
		} else {
			byId("monitor_data2").innerHTML += '<div class="' + cls + '" id="' + tid + '"></div>';
		}
		//设置仪器角度
		var sModel = byId(tid);
		sModel.style.transform = "rotatez(" + arrData[i]['angle'] + "deg)";
		sModel.style.mozTransform = 'rotate(' + arrData[i]['angle'] + 'deg)';
		sModel.style.webkitTransform = 'rotate(' + arrData[i]['angle'] + 'deg)';
		//通过jquery设置仪器的位置  如果有好的js优化可以替换
		var jqtid = "#" + tid;
		$(jqtid).offset({
			top: arrData[i]['top'],
			left: arrData[i]['left']
		});
	}
}
//添加组件
function addZj(arrData) {
	for(var i = 0; i < arrData.length; i++) {
		var arrList = arrData[i]['list'];
		var tbid = arrData[i]['deviceId'];
		var zj_dic = "item_zj";
		if(arrData[i]['direction'] == 1) {
			zj_dic = "item_zj";
		} else {
			zj_dic = "item_zj2";
		}
		var str = "<div class='item_div'><table id='" + tbid + "' class='item_tb' border='0px' cellspacing='0px' cellpadding='0px'>";
		for(var j = 0; j < arrData[i]['row']; j++) {
			str += '<str>';
			for(var k = 0; k < arrData[i]['col']; k++) {
				str += '<td class="' + zj_dic + '" onmouseover="showInfo(\'' + (tbid + "_" + j + "_" + k) + '\')" onmouseout="clearCT()" onclick="zjClick(\'' + (tbid + "_" + j + "_" + k) + '\')" ><div class="' + zj_dic + '_div" style="visibility:hidden" id="' + (tbid + "_" + j + "_" + k) + '"></div></td>';
			}
			str += '</tr>'
		}
		str += "</table></div>";
		byId('monitor_data2').innerHTML += str;

		var sModel = byId(tbid);
		sModel.style.transform = "rotatez(" + arrData[i]['angle'] + "deg)";
		sModel.style.mozTransform = 'rotate(' + arrData[i]['angle'] + 'deg)';
		sModel.style.webkitTransform = 'rotate(' + arrData[i]['angle'] + 'deg)';
		//通过jquery设置仪器的位置  如果有好的js优化可以替换
		var jqtid = "#" + tbid;
		$(jqtid).offset({
			top: arrData[i]['top'],
			left: arrData[i]['left']
		});
		checkZJ(arrData[i]['row'], arrData[i]['col'], arrList);
	}
}
//组件点击 找到串和逆变器
function zjClick(tid) {
	isChooseId = true;
	for(var i = 0; i < nbqArr.length; i++) {
		for(var j = 0; j < nbqArr[i]['clist'].length; j++) {
			for(var k = 0; k < nbqArr[i]['clist'][j]['zlist'].length; k++) {
				if(nbqArr[i]['clist'][j]['zlist'][k]['deviceId'] == tid) {
					//					更改之前选择的逆变器样式
					if(idNChoose.length > 0) {
						byId(idNChoose).style.border = "0";
					}
					//					赋值选择的逆变器	
					idNChoose = nbqArr[i]['deviceId'];
					byId(idNChoose).style.border = "1px solid red";
					//显示右侧串列表
					chooseRightList(i);
					//显示串内组件颜色
					normalClickZJ(i, j, nbqArr[i]['clist'][j]['deviceId']);
					//更改被点击的组件颜色
					byId(tid).style.background = "lightcoral";
				}
			}
		}
	}
}
//显示存在的组件
function checkZJ(row, col, arrData) {
	for(var j = 0; j < row; j++) {
		for(var k = 0; k < col; k++) {
			for(var i = 0; i < arrData.length; i++) {
				if(j == arrData[i]['i'] && k == arrData[i]['j']) {
					byId(arrData[i]['deviceId']).style.visibility = "visible";
				}
			}
		}
	}
}
//什么都不点击时取消已点击的焦点
function chooseNone() {
	if(!isChooseId) {
		if(idRight.length > 0) {
			byId(idRight).style.background = "#fff";
		}
		idRight = "";
		if(idNChoose.length != 0) {
			byId(idNChoose).style.border = "0";
		}
		idNChoose = "";
		byId('monitor_right_ul').innerHTML = "";
		if(zjChooseArr != null && zjChooseArr.length > 0) {
			for(var i = 0; i < zjChooseArr.length; i++) {
				byId(zjChooseArr[i]['deviceId']).style.background = "#aca";
				byId(zjChooseArr[i]['deviceId']).innerText = "";
			}
		}
		zjChooseArr = new Array();
	}
	isChooseId = false;

}
/**
 * 方法
 * */
function byId(ele) {
	return document.getElementById(ele);
}

function log(ss) {
	byId("hehe").innerText = ss;
}

/**
 * 鼠标滑轮事件
 * */
//添加鼠标滑轮事件
var EventUtil = {
		getEvent: function(event) {
			return event ? event : window.event;
		},
		getWheelDelta: function(event) {
			if(event.wheelDelta) {
				return(window.opera && window.opera.version() < 9.5 ? -event.wheelDelta : event.wheelDelta);
			} else {
				return -event.detail * 40;
			}
		},
		addHandler: function(element, type, handler) {
			if(element.addEventListener) {
				element.addEventListener(type, handler, false)
			} else if(element.attachEvent) {
				element.attachEvent('on' + type, handler);
			} else {
				element['on' + type] = handler;
			}
		}
	}
	//给滑轮添加事件
EventUtil.addHandler(document, 'mousewheel', handleMouseWheel);
EventUtil.addHandler(document, 'DOMMouseScroll', handleMouseWheel);
//禁止滑轮控制滚动条
disabledMouseWheel();
//禁止控制滚动条
function disabledMouseWheel() {
	if(document.addEventListener) {
		document.addEventListener('DOMMouseScroll', scrollFunc, false);
	} //W3C  
	window.onmousewheel = document.onmousewheel = scrollFunc; //IE/Opera/Chrome  
}
//禁止控制滚动条事件
function scrollFunc(evt) {
	evt = evt || window.event;
	if(evt.preventDefault) {
		evt.preventDefault();
		evt.stopPropagation();
	} else {
		evt.cancelBubble = true;
		evt.returnValue = false;
	}
	return false;
}

function handleMouseWheel(e) {
	e = EventUtil.getEvent(e);
	var delta = EventUtil.getWheelDelta(e);
	if(delta > 0) {
		zoomout();
	} else {
		zoomin();
	}
}

/**
 * 放大缩小
 * */
var size = 1.0;

function zoomout() {
	size = size + 0.1;
	if(size > 1.4) {
		size = 1.4
	}
	set();
}

function zoomin() {
	size = size - 0.1;
	if(size < 0.6) {
		size = 0.6;
	}
	set();
}

function set() {
	byId("monitor_data2").style.zoom = size;
	byId("monitor_data2").style.cssText += '; -moz-transform: scale(' + size + ');-moz-transform-origin: 0 0; ';
}
//清除界面所有的信息  用于切换屋顶时
function clearAll() {
	nbqArr = new Array();
	zjChooseArr = new Array();
	zjInfoArr = new Array();
	if(idRight.length > 0) {
		byId(idRight).style.background = "#fff";
	}
	idRight = "";
	if(idNChoose.length != 0) {
		byId(idNChoose).style.border = "0";
	}
	idNChoose = "";
	byId('monitor_right_ul').innerHTML = "";
	if(zjChooseArr.length > 0) {
		for(var i = 0; i < zjChooseArr.length; i++) {
			byId(zjChooseArr[i]['deviceId']).style.background = "#aca";
			byId(zjChooseArr[i]['deviceId']).innerText = "";
		}
	}
	zjChooseArr = new Array();
	byId("monitor_data2").innerHTML = "";
}